import{w as S,d as P,C as I,r as L,o as V,a as U,D as k,E as x,h as b,G as _,b as T,c as z,e as R}from"./main.4a6f243a.js";import{_ as K}from"./_plugin-vue_export-helper.cdc0426e.js";var F=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],N=function(n){return F.map(function(t){return t.toLowerCase()}).indexOf(n.toLowerCase())!==-1},G=function(n,t,e){Object.keys(t).filter(N).forEach(function(o){var i=t[o];typeof i=="function"&&(o==="onInit"?i(n,e):e.on(o.substring(2),function(a){return i(a,e)}))})},$=function(n,t,e,o){var i=n.modelEvents?n.modelEvents:null,a=Array.isArray(i)?i.join(" "):i;S(o,function(c,d){e&&typeof c=="string"&&c!==d&&c!==e.getContent({format:n.outputFormat})&&e.setContent(c)}),e.on(a||"change input undo redo",function(){t.emit("update:modelValue",e.getContent({format:n.outputFormat}))})},H=function(n,t,e,o,i,a){o.setContent(a()),e.attrs["onUpdate:modelValue"]&&$(t,e,o,i),G(n,e.attrs,o)},E=0,j=function(n){var t=Date.now(),e=Math.floor(Math.random()*1e9);return E++,n+"_"+e+E+String(t)},q=function(n){return n!==null&&n.tagName.toLowerCase()==="textarea"},w=function(n){return typeof n>"u"||n===""?[]:Array.isArray(n)?n:n.split(" ")},W=function(n,t){return w(n).concat(w(t))},J=function(n){return n==null},D=function(){return{listeners:[],scriptId:j("tiny-script"),scriptLoaded:!1}},Q=function(){var n=D(),t=function(i,a,c,d){var r=a.createElement("script");r.referrerPolicy="origin",r.type="application/javascript",r.id=i,r.src=c;var v=function(){r.removeEventListener("load",v),d()};r.addEventListener("load",v),a.head&&a.head.appendChild(r)},e=function(i,a,c){n.scriptLoaded?c():(n.listeners.push(c),i.getElementById(n.scriptId)||t(n.scriptId,i,a,function(){n.listeners.forEach(function(d){return d()}),n.scriptLoaded=!0}))},o=function(){n=D()};return{load:e,reinitialize:o}},X=Q(),Y=function(){return typeof window<"u"?window:global},s=function(){var n=Y();return n&&n.tinymce?n.tinymce:null},Z={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(n){return n==="html"||n==="text"}}},f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(n){for(var t,e=1,o=arguments.length;e<o;e++){t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},f.apply(this,arguments)},nn=function(n,t,e,o){return n(o||"div",{id:t,ref:e})},en=function(n,t,e){return n("textarea",{id:t,visibility:"hidden",ref:e})},tn=P({props:Z,setup:function(n,t){var e=n.init?f({},n.init):{},o=I(n),i=o.disabled,a=o.modelValue,c=o.tagName,d=L(null),r=null,v=n.id||j("tiny-vue"),C=n.init&&n.init.inline||n.inline,h=!!t.attrs["onUpdate:modelValue"],p=!0,A=n.initialValue?n.initialValue:"",y="",B=function(u){return h?function(){return a!=null&&a.value?a.value:""}:function(){return u?A:y}},g=function(){var u=B(p),l=f(f({},e),{readonly:n.disabled,selector:"#"+v,plugins:W(e.plugins,n.plugins),toolbar:n.toolbar||e.toolbar,inline:C,setup:function(m){r=m,m.on("init",function(O){return H(O,n,t,m,a,u)}),typeof e.setup=="function"&&e.setup(m)}});q(d.value)&&(d.value.style.visibility=""),s().init(l),p=!1};S(i,function(u){var l;r!==null&&(typeof((l=r.mode)===null||l===void 0?void 0:l.set)=="function"?r.mode.set(u?"readonly":"design"):r.setMode(u?"readonly":"design"))}),S(c,function(u){var l;h||(y=r.getContent()),(l=s())===null||l===void 0||l.remove(r),_(function(){return g()})}),V(function(){if(s()!==null)g();else if(d.value&&d.value.ownerDocument){var u=n.cloudChannel?n.cloudChannel:"5",l=n.apiKey?n.apiKey:"no-api-key",m=J(n.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+l+"/tinymce/"+u+"/tinymce.min.js":n.tinymceScriptSrc;X.load(d.value.ownerDocument,m,g)}}),U(function(){s()!==null&&s().remove(r)}),C||(k(function(){p||g()}),x(function(){var u;h||(y=r.getContent()),(u=s())===null||u===void 0||u.remove(r)}));var M=function(u){var l;y=r.getContent(),(l=s())===null||l===void 0||l.remove(r),e=f(f({},e),u),_(function(){return g()})};return t.expose({rerender:M}),function(){return C?nn(b,v,d,n.tagName):en(b,v,d)}}});const on={components:{Editor:tn}};function rn(n,t,e,o,i,a){const c=T("editor");return z(),R(c,{"api-key":"jdkd50w1oki4lpzrz14jno3sj88rn5km7puylq6xlh9i8wto",init:{height:500,plugins:"lists link image emoticons",toolbar:"styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist | link image emoticons"}})}const ln=K(on,[["render",rn]]);export{ln as default};
